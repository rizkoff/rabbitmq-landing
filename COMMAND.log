
## https://www.rabbitmq.com/tutorials/tutorial-one-python.html

docker network create rabbit
docker run -d --rm --name rabbitmq --hostname rabbitmq -p 5672:5672 -p 15672:15672 --network rabbit rabbitmq:3.9-management

##apt update && apt -y install netcat vim


docker build -t python:rabbitland -f python.Dockerfile .

01:
docker run -d --rm --name python --hostname python --network rabbit -v `pwd`/01:/prj python:rabbitland bash
docker exec -it python python consume/receive.py
docker exec -it python python publish/send.py

02:
docker run -it --rm --name python --hostname python --network rabbit -v `pwd`/02:/prj python:rabbitland bash
docker exec -it python bash #  python consume/receive.py
docker exec -it python bash #  python consume/receive.py
docker exec -it python python publish/new_task.py first msg.
docker exec -it python python publish/new_task.py 2nd msg..
docker exec -it python python publish/new_task.py 3rd msg...
docker exec -it python python publish/new_task.py 4th msg....
docker exec -it python python publish/new_task.py fifth msg.....

v@k8s-master03:~$ docker exec rabbitmq rabbitmqctl delete_queue task_queue
Deleting queue 'task_queue' on vhost '/' ...
Queue was successfully deleted with 0 messages
v@k8s-master03:~$ watch -d -n 6 docker exec rabbitmq rabbitmqctl list_queues name messages_ready messages_unacknowledged

Every 6.0s: docker exec rabbitmq rabbitmqctl list_queues name messages_ready messages_unackn...  k8s-master03: Sat Jan  8 19:44:26 2022

Timeout: 60.0 seconds ...
Listing queues for vhost / ...
name    messages_ready  messages_unacknowledged
hello   0       0
task_queue      0       25





